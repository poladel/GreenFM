<%- include('../partials/header.ejs') %>

<div class="page-container">
    <div class="content-wrap">
        <div class="container">
            <%- include('../partials/nav.ejs') %>

                <!-------------------- HEADER MENUS -------------------->
                <%- include('../partials/menu.ejs') %>

                    <!-------------------- CONTENTS START -------------------->
                    <!-- Tabs for Submissions and Schedule -->
                    <div class="tabs-container">
                        <button class="tab-button active" data-tab="schedule-tab">Schedule</button>
                        <button class="tab-button" data-tab="submissions-tab">Submissions</button>
                    </div>

                    <div class="tab-content">
                        <!-- Schedule Tab -->
                        <div id="schedule-tab" class="tab-pane active">
                            <div class="settings-container">
                                <div class="route-settings">
                                    <!-- Combined Form -->
                                    <h3>GFM Application & Assessment Periods</h3>
                                    <form id="periodSettingsForm"> <!-- Changed ID -->
                                        <h4>Application Period</h4>
                                        <input type="hidden" name="appKey" value="JoinGFM">
                                        <div>
                                            <label for="appStartDate">Start Date:</label>
                                            <input type="date" id="appStartDate" name="appStartDate" required>
                                        </div>
                                        <div>
                                            <label for="appEndDate">End Date:</label>
                                            <input type="date" id="appEndDate" name="appEndDate" required>
                                        </div>

                                        <hr style="margin: 20px 0;">

                                        <h4>Assessment Period</h4>
                                        <input type="hidden" name="assessKey" value="GFMAssessment">
                                        <div>
                                            <label for="assessStartDate">Start Date:</label>
                                            <input type="date" id="assessStartDate" name="assessStartDate" required>
                                        </div>
                                        <div>
                                            <label for="assessEndDate">End Date:</label>
                                            <input type="date" id="assessEndDate" name="assessEndDate" required>
                                        </div>

                                        <button type="submit">Save Periods</button>
                                    </form>
                                    <div id="existingApplicationPeriod"
                                        style="margin-top: 10px; font-weight: bold;">
                                        <!-- Dynamically updated -->
                                    </div>
                                    <div id="existingAssessmentPeriod" style="margin-top: 10px; font-weight: bold;">
                                        <!-- Dynamically updated -->
                                    </div>
                                    <!-- End NEW Section -->
                                </div>

                                <div class="filters-container">
                                    <label for="departmentFilter">Department:</label>
                                    <select id="departmentFilter"> <!-- MUST HAVE id="departmentFilter" -->
                                        <option value="News and Public Affairs">News and Public Affairs</option>
                                        <option value="Music and Entertainment">Music and Entertainment</option>
                                        <option value="Operations and Logistics">Operations and Logistics
                                        </option>
                                        <option value="Creatives and Promotions">Creatives and Promotions
                                        </option>
                                    </select>

                                    <label for="weekFilter">View Week:</label>
                                    <select id="weekFilter" disabled> <!-- MUST HAVE id="weekFilter" -->
                                        <option value="">Set Assessment Period First</option>
                                        <!-- Changed Text -->
                                        <!-- Options will be populated by JavaScript -->
                                    </select>
                                </div>

                                <div id="scheduleGrid" class="schedule-grid">
                                    <table class="schedule-table">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Monday</th>
                                                <th>Tuesday</th>
                                                <th>Wednesday</th>
                                                <th>Thursday</th>
                                                <th>Friday</th>
                                            </tr>
                                        </thead>
                                        <tbody id="schedule-body">
                                            <!-- Rows generated by EJS or JS -->
                                            <% const times=["7:00-8:00", "8:00-9:00" , "9:00-10:00" , "10:00-11:00"
                                                , "11:00-12:00" , "12:00-1:00" , "1:00-2:00" , "2:00-3:00" , "3:00-4:00"
                                                , "4:00-5:00" , "5:00-6:00" , "6:00-7:00" ]; %>
                                                <% const days=["Monday", "Tuesday" , "Wednesday" , "Thursday" , "Friday"
                                                    ]; %>
                                                    <% times.forEach(time=> { %>
                                                        <tr>
                                                            <td class="time">
                                                                <%= time %>
                                                            </td>
                                                            <% days.forEach(day=> { %>
                                                                <td>
                                                                    <!-- Add 'schedule-button' class -->
                                                                    <button type="button" class="schedule-button availablebtn"
                                                                            data-day="<%= day %>" data-time="<%= time %>"
                                                                            disabled></button>
                                                                </td>
                                                                <% }); %>
                                                        </tr>
                                                        <% }); %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Submissions Tab -->
                            <div id="submissions-tab" class="tab-pane">
                                <p>Submissions content goes here.</p>
                                <!-- You would likely have a table or list here populated with submission data -->
                            </div>
                        </div>
                    </div>
        </div>
        <%- include('../partials/footer.ejs') %> <!-- Include footer -->
    </div>
</div> <!-- End page-container -->

<!-- Schedule Modal -->
<div id="scheduleModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close">&times;</span> <!-- Keep the close button -->

        <!-- NEW: Container for Application Details View (Initially Hidden) -->
        <div id="applicationDetailsView" style="display: none;">
            <h2>Applicant Information</h2>
            <div>
                <label>Name:</label>
                <input type="text" id="appName" readonly>
            </div>
            <div>
                <label>DLSU-D Email:</label>
                <input type="text" id="appEmail" readonly>
            </div>
            <div>
                <label>Student Number:</label>
                <input type="text" id="appStudentNum" readonly>
            </div>
            <div>
                <label>Section:</label>
                <input type="text" id="appSection" readonly>
            </div>
            <div>
                <label>Preferred Department:</label>
                <input type="text" id="appDepartment" readonly>
            </div>
            <!-- NEW: Add field for preferred schedule -->
            <div>
                <label>Booked Schedule:</label>
                <input type="text" id="appPreferredSchedule" readonly>
            </div>
            <!-- End NEW -->
        </div>
        <!-- End Application Details View -->

    </div> <!-- End modal-content -->
</div> <!-- End scheduleModal -->

<!-- SCRIPT TAG AT THE END -->
<script src="/js/1-admin/staff.js"></script>

</body>
</html>