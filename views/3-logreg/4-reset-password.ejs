<%- include('../partials/header-logreg.ejs') %>

<!-- Centering container -->
<div class="flex-1 flex items-center justify-center mb-[2vh]"> <!-- Replaces .register-container -->
  <!-- Register Box Styling -->
  <div class="relative bg-white p-[4vh] pt-[2vh] w-[28vw] min-h-[40vh] max-h-[120vh] h-auto rounded-[1.5vh] shadow-md text-center overflow-visible"> <!-- Replaces .register-box -->

    <!-- Back Button -->
    <span class="back-to-home block text-left mb-[0.5vh] relative cursor-pointer" onclick="goBack()">
      <img src="/img/back.png" alt="Back to Previous Page" class="mt-[2vh] w-[3vh] h-auto">
    </span>

    <!-- Logo -->
    <a href="/">
      <img src="/img/GFMLogo.png" alt="Green FM Logo" class="mx-auto w-[10vh] h-auto cursor-pointer mb-4">
    </a>

    <!-- Title -->
    <h2 class="text-[#00722A] font-bold text-[2.8vh] mb-[3vh]">Reset Password</h2> <!-- Replaces .register-title -->

    <!-- Reset Form -->
    <form class="reset-password-form relative flex flex-col gap-[2.5vh] text-left"> <!-- Replaces .register-form styling -->
      <!-- Email (Disabled) -->
      <div class="form-group">
        <label for="email" class="text-[1.8vh] text-gray-800 font-bold mb-[0.8vh] block">Email</label>
        <input type="text" id="email" name="email" value="<%= user.email %>" disabled required
               class="w-full p-[1.5vh] border border-gray-300 rounded-[1vh] text-[2vh] text-gray-500 bg-gray-100 cursor-not-allowed box-border"> <!-- Disabled styles -->
      </div>

      <!-- New Password Group -->
      <div class="form-group relative">
        <label for="new-password" class="text-[1.8vh] text-gray-800 font-bold mb-[0.8vh] block">New Password</label>
        <input type="password" id="new-password" name="newPassword" required
               class="w-full p-[1.5vh] border border-gray-300 rounded-[1vh] text-[2vh] text-gray-800 box-border focus:border-[#00722A] focus:outline-none">
        <!-- Password Validation Pop-up -->
        <div class="password-validation hidden absolute top-1/2 left-full transform -translate-y-1/2 bg-white border border-gray-300 rounded-[1vh] shadow-md p-[1.5vh] w-[18vw] z-[9999] ml-[1vh]" id="passwordValidation">
           <ul class="list-none p-0 m-0 ml-[0.8vh] text-[1.8vh]">
            <li id="password-length" class="text-gray-800">Must be at least 8 characters long.</li>
            <li id="password-uppercase" class="text-gray-800">Must contain at least one uppercase letter.</li>
            <li id="password-lowercase" class="text-gray-800">Must contain at least one lowercase letter.</li>
            <li id="password-number" class="text-gray-800">Must contain at least one number.</li>
            <li id="password-special" class="text-gray-800">Must contain at least one special character.</li>
          </ul>
        </div>
        <div class="new-password-error text-red-500 text-xs mt-1"></div>
      </div>

      <!-- Confirm New Password Group -->
      <div class="form-group">
        <label for="confirm-new-pass" class="text-[1.8vh] text-gray-800 font-bold mb-[0.8vh] block">Confirm New Password</label>
        <input type="password" id="confirm-new-pass" name="confirmNewPassword" required
               class="w-full p-[1.5vh] border border-gray-300 rounded-[1vh] text-[2vh] text-gray-800 box-border focus:border-[#00722A] focus:outline-none">
        <div class="confirm-new-pass-error text-red-500 text-xs mt-1"></div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="bg-[#00722A] text-white p-[1.5vh] text-[2vh] font-bold border-none rounded-[1vh] cursor-pointer transition duration-300 ease-in-out hover:bg-[#00591d]">Submit</button> <!-- Replaces .register-button -->
    </form>

     <!-- Optional: Link back to login -->
     <div class="mt-[2vh] text-[2vh]">
         <a href="/LogIn" class="text-[#00722A] no-underline mx-[1.5vh] hover:underline">Back to Login</a>
     </div>

  </div>
</div>

<!-- Keep existing JS link -->
<script src="/js/3-logreg/reset-password.js"></script>
<!-- Add similar JS logic as register.js to handle password validation visibility/colors if not already in reset-password.js -->
<script>
    // Add this JS snippet or integrate into reset-password.js
    document.addEventListener('DOMContentLoaded', () => {
        const newPasswordInput = document.getElementById('new-password');
        const validationBox = document.getElementById('passwordValidation');

         if (newPasswordInput && validationBox) {
             newPasswordInput.addEventListener('focus', () => {
                 validationBox.classList.remove('hidden');
             });
             newPasswordInput.addEventListener('blur', () => {
                 validationBox.classList.add('hidden');
             });
         }
    });
</script>
</body>
</html>