<%- include('../partials/header.ejs') %>

<div class="page-container flex flex-col min-h-screen bg-gray-100"> <!-- Added bg-gray-100 for consistency -->
    <!-- Include nav (fixed position, doesn't affect flow here) -->
    <%- include('../partials/nav.ejs') %>

    <!-- Include menu OUTSIDE the main content wrapper -->
    <%- include('../partials/menu.ejs') %>

    <div class="content-wrap flex-1">
        <!-- Main content area wrapper with padding -->
        <!-- Added pr-4 for consistent right padding -->
        <div class="pt-5 pl-16 pr-4 lg:pl-[14vw]">

            <!-------------------- CONTENTS START -------------------->
            <!-- Tab Buttons Container: Centered with max-width -->
            <div class="mb-4 border-b border-gray-200 max-w-6xl 2xl:max-w-screen-xl mx-auto">
                <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="accountTabs">
                    <li class="mr-2">
                        <button class="inline-block p-4 border-b-2 rounded-t-lg tab-button active-tab" id="account-tab-button" data-tab="account" type="button">Account Information</button>
                    </li>
                    <li class="mr-2">
                        <button class="inline-block p-4 border-b-2 rounded-t-lg tab-button" id="password-tab-button" data-tab="password" type="button">Change Password</button>
                    </li>
                </ul>
            </div>

            <!-- Flex container for forms: Centered with max-width -->
            <div class="flex flex-col lg:flex-row gap-6 max-w-6xl 2xl:max-w-screen-xl mx-auto mb-5">

                <!-- Manage Account Form -->
                <form id="manage-account-form" data-tab-content="account" class="manage-account-form bg-white p-6 rounded-lg shadow-md flex flex-col items-center flex-1"> <!-- Use flex-1 -->
                     <input type="hidden" id="userId" value="<%= user._id %>"> <!-- Store user ID -->
                     <h3 class="text-xl font-semibold text-green-700 mb-5 w-full text-center border-b pb-2">Account Information</h3> <!-- Added border, text-center -->

                     <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="username" class="text-sm font-bold mb-1 text-gray-700">Username</label>
                        <input type="text" id="username" name="username" value="<%= user.username %>"
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="username-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>

                    <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="email" class="text-sm font-bold mb-1 text-gray-700">Email</label>
                        <input type="email" id="email" name="email" value="<%= user.email %>"
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="email-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                    <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="lastName" class="text-sm font-bold mb-1 text-gray-700">Last Name</label>
                        <input type="text" id="lastName" name="lastName" value="<%= user.lastName %>" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="lastName-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                     <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="firstName" class="text-sm font-bold mb-1 text-gray-700">First Name</label>
                        <input type="text" id="firstName" name="firstName" value="<%= user.firstName %>" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="firstName-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                    <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="middleInitial" class="text-sm font-bold mb-1 text-gray-700">Middle Initial</label>
                        <input type="text" id="middleInitial" name="middleInitial" value="<%= user.middleInitial || '' %>" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="middleInitial-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                    <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                        <label for="suffix" class="text-sm font-bold mb-1 text-gray-700">Suffix</label>
                        <input type="text" id="suffix" name="suffix" value="<%= user.suffix || '' %>" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="suffix-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>

                    <% if (user.dlsuD) { %>
                        <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                            <label for="dlsudEmail" class="text-sm font-bold mb-1 text-gray-700">DLSU-D Email</label>
                            <input type="text" id="dlsudEmail" name="dlsudEmail" value="<%= user.dlsudEmail || '' %>" readonly
                                   class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                            <div class="dlsudEmail-error error-text text-red-500 text-xs mt-1 h-4"></div>
                        </div>
                        <div class="form-group w-full md:w-[90%] mb-4 flex flex-col">
                            <label for="studentNumber" class="text-sm font-bold mb-1 text-gray-700">Student Number</label>
                            <input type="text" id="studentNumber" name="studentNumber" value="<%= user.studentNumber || '' %>" readonly
                                   class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                            <div class="studentNumber-error error-text text-red-500 text-xs mt-1 h-4"></div>
                        </div>
                    <% } %>

                    <div class="w-full md:w-[90%] mt-2 flex justify-end gap-3 border-t pt-4">
                        <button type="button" id="edit-account-button" class="edit-button py-2 px-5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-300">Edit</button>
                        <button type="button" id="cancel-account-button" class="cancel-button hidden py-2 px-5 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition duration-300">Cancel</button>
                        <button type="submit" id="submit-account-button" class="submit-button hidden py-2 px-5 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition duration-300">Save</button>
                    </div>
                </form>

                <!-- Change Password Form -->
                <form id="change-password-form" data-tab-content="password" class="change-password-form bg-white p-6 rounded-lg shadow-md flex flex-col items-center hidden flex-1"> <!-- Use flex-1 -->
                     <h3 class="text-xl font-semibold text-green-700 mb-5 w-full text-center border-b pb-2">Change Password</h3> <!-- Added border, text-center -->

                     <div class="form-group w-full md:w-[90%] mb-4 flex flex-col relative">
                        <label for="password" class="text-sm font-bold mb-1 text-gray-700">Old Password</label>
                        <input type="password" id="password" name="password" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="password-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                    <div class="form-group w-full md:w-[90%] mb-4 flex flex-col relative">
                        <label for="newPassword" class="text-sm font-bold mb-1 text-gray-700">New Password</label>
                        <input type="password" id="newPassword" name="newPassword" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <!-- Validation Requirements Container -->
                        <div id="newPasswordValidation" class="hidden mt-2 p-3 bg-gray-100 rounded-md text-xs text-gray-700 space-y-1">
                            <p id="new-password-length" class="password-requirement text-red-500">Minimum of 8 characters</p>
                            <p id="new-password-uppercase" class="password-requirement text-red-500">At least one uppercase letter</p>
                            <p id="new-password-lowercase" class="password-requirement text-red-500">At least one lowercase letter</p>
                            <p id="new-password-number" class="password-requirement text-red-500">At least one number</p>
                            <p id="new-password-special" class="password-requirement text-red-500">At least one special character (!@#$%^&*...)</p>
                        </div>
                        <div class="newPassword-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>
                     <div class="form-group w-full md:w-[90%] mb-4 flex flex-col relative">
                        <label for="confirmNewPassword" class="text-sm font-bold mb-1 text-gray-700">Confirm New Password</label>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" readonly
                               class="w-full p-2.5 border-none rounded-lg outline-none bg-gray-200 text-gray-600 text-base cursor-not-allowed">
                        <div class="confirmNewPassword-error error-text text-red-500 text-xs mt-1 h-4"></div>
                    </div>

                    <div class="w-full md:w-[90%] mt-2 flex justify-end gap-3 border-t pt-4">
                        <button type="button" id="edit-password-button" class="edit-button py-2 px-5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-300">Edit</button>
                         <button type="button" id="cancel-password-button" class="cancel-button hidden py-2 px-5 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition duration-300">Cancel</button>
                        <button type="submit" id="submit-password-button" class="submit-button hidden py-2 px-5 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition duration-300">Save</button>
                    </div>
                </form>

            </div>
            <!-------------------- CONTENTS END -------------------->
            <br> 
        </div> <!-- End main content area wrapper -->
    </div> <!-- End content-wrap -->

    <!-------------------- FOOTER -------------------->
    <%- include('../partials/footer.ejs') %>

</div> <!-- End page-container -->

<!-- Add Toastify JS for toast notifications -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="/js/3-logreg/manage-account.js"></script>
</body>
</html>